parameters:
  # job name
  - name: name
    type: string
    default: build

  # Container registry to work with
  - name: registry
    type: string

  # Service connection to talk to azure
  - name: serviceConnection
    type: string

  # Agent pool to use
  - name: pool
    type: object
    default: ContainerBuilder

  - name: dependsOn
    type: object
    default: []

  - name: steps
    type: object
    default:
      - script: make test

jobs:
  - job: ${{ parameters.name }}
    dependsOn: ${{ parameters.dependsOn }}
    pool: ${{ parameters.pool }}
    displayName: Build
    steps:
      - ${{ parameters.steps }}
